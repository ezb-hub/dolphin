#!/bin/bash
. "$(dirname "$0")/_/husky.sh"

echo 'ğŸ“¦ ğŸ“¦ ğŸ“¦'
echo 'Styling, testing and building your project before committing.'

# Check Prettier standards
yarn check-format ||
  (
    echo 'ğŸ§¨ ğŸ§¨ ğŸ§¨'
    echo 'Prettier check Failed.'

    false
  )

# Check ESLint Standards
yarn lint ||
  (
    echo 'ğŸ§¨ ğŸ§¨ ğŸ§¨'
    echo 'ESLint Check Failed.'

    false
  )

# Check tsconfig standards
yarn check-types ||
  (
    echo 'ğŸ§¨ ğŸ§¨ ğŸ§¨'
    echo 'Failed Type check.'

    false
  )

# If everything passes... Now we can commit
echo 'ğŸ—ï¸ ğŸ— ğŸ—'
echo 'Building...'

yarn build ||
  (
    echo 'ğŸ§¨ ğŸ§¨ ğŸ§¨'
    echo 'Build failed.'

    false
  )

# If everything passes... Now we can commit
echo 'ğŸš€ ğŸš€ ğŸš€'
echo 'Committing...'
